# 同步异步阻塞非阻塞

## 1. 概述

### 1. 简单理解

- **同步：** 同步就是调用者发起一个调用后，被调用者未处理完请求之前，调用不返回。
- **异步：** 异步就是调用者发起一个调用后，立刻得到被调用者的回应表示已接收到请求，但是被调用者并没有返回结果，此时我们可以处理其他的请求，被调用者通常依靠事件，回调等机制来通知调用者其返回结果。

**同步和异步的区别在于同步需要调用者需要等待处理结果，异步则调用者不需要等待处理结果，被调用者会通过回调等机制来通知调用者其返回结果**。

- **阻塞：** 阻塞就是发起一个请求，调用者一直等待请求结果返回，也就是当前线程会被挂起，无法从事其他任务，只有当条件就绪才能继续。
- **非阻塞：** 非阻塞就是发起一个请求，调用者不用一直等着结果返回，可以先去干其他事情。

**阻塞与非阻塞表示线程状态，最大区别在于阻塞会挂起当前线程，非阻塞则不会**。



### 2. 差异

* `同步异步`与`被调用者`有关。在处理完成后会通过回调通知调用者一般就是异步，不然就需要调用者自己查询处理结果。
* `阻塞非阻塞`与`调用者`有关。调用者在发出请求后返回结果前这段时间能做其他事就是非阻塞，否则就是阻塞。



### 3. 原理

实际上同步与异步是针对**应用程序与内核的交互**而言的，针对的是应用程序，关注的是**程序中间的协作关系**；

* **同步**：执行一个操作之后，进程触发I/O操作并等待(也就是我们说的阻塞)或者轮询的去查看I/O操作(也就是我们说的非阻塞)是否完成，等待结果，然后才继续执行后续的操作。

* **异步**：执行一个操作后，可以去执行其他的操作，然后等待通知再回来执行刚才没执行完的操作。

阻塞与非阻塞更关注的是**单个进程的执行状态**。

* **阻塞**：进程给CPU传达一个任务之后，一直等待CPU处理完成，然后才执行后面的操作。

* **非阻塞**：进程给CPU传达任务后，继续处理后续的操作，过段时间再来询问之前的操作是否完成。这样的过程其实也叫轮询。



**同步有阻塞和非阻塞之分，异步没有，它一定是非阻塞的。**

> 阻塞、非阻塞、多路IO复用，都是同步I/O，异步必定是非阻塞的，不存在异步阻塞和异步非阻塞的说法。

**真正的异步I/O需要CPU的深度参与**，换句话说，只有用户线程在操作I/O的时候根本不去考虑I/O的执行，全部都交给CPU去完成，而自己只等待一个完成信号的时候，才是真正的异步I/O。

>所以，拉一个子线程去轮询、去死循环，或者使用select、poll、epoll，都不是异步。

